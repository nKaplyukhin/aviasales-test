(this["webpackJsonpaviasales-test"]=this["webpackJsonpaviasales-test"]||[]).push([[0],{24:function(e,t,n){},34:function(e,t,n){},41:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),c=n(5),i=n.n(c),a=(n(34),n(6)),o=n(7),l=n(10),u=n(9),h=n(8),f=(n(41),n(4)),j=n.n(f),d=n(14),g=n(2),p=n(15),b=n(27),O=n(26).create({baseURL:"https://front-test.beta.aviasales.ru/"}),m=function(e){return O.get("tickets?searchId=".concat(e))},v=function(){return O.get("search ").then((function(e){return e.data}))},x="SET_TICKETS",_="SET_SEARCH_ID",k="INITIAL_SUCCESS",T="CHANGE_SORTING",N="CHANGE_FILTER",S={tickets:[],searchId:null,initialSuccess:!1,filter:{all:!0,noneTransfer:!1,oneTransfer:!1,twoTransfer:!1,threeTransfer:!1},sorting:"cheap"},w=Object(p.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(g.a)(Object(g.a)({},e),{},{searchId:t.searchId});case x:return Object(g.a)(Object(g.a)({},e),{},{tickets:t.data});case k:return Object(g.a)(Object(g.a)({},e),{},{initialSuccess:!0});case T:return Object(g.a)(Object(g.a)({},e),{},{sorting:t.sorting});case N:return Object(g.a)(Object(g.a)({},e),{},{filter:Object(g.a)(Object(g.a)({},e.filter),t.filter)});default:return e}}),Object(p.a)(b.a)),I=n(29),y=function(e){return e.filter},H=Object(I.a)((function(e){return e.tickets}),y,(function(e,t){return t.all?e:e.filter((function(e){return function(e,t){return t.noneTransfer&&!e.segments[0].stops.length&&!e.segments[1].stops.length}(e,t)||function(e,t){return t.oneTransfer&&1===e.segments[0].stops.length&&1===e.segments[1].stops.length}(e,t)||function(e,t){return t.twoTransfer&&2===e.segments[0].stops.length&&2===e.segments[1].stops.length}(e,t)||function(e,t){return t.threeTransfer&&3===e.segments[0].stops.length&&3===e.segments[1].stops.length}(e,t)}))})),F=(n(62),n.p+"static/media/logo.6e2e8894.svg"),C=n(0),D=function(e){return Object(C.jsx)("div",{className:"header",children:Object(C.jsx)("img",{src:F,alt:"",className:"header__logo"})})},E=(n(64),function(e){var t=e.filter,n=e.changeFilter,s=e.text,r=e.filterData;return Object(C.jsx)("li",{className:"navbar-filter__list__item",children:Object(C.jsxs)("label",{className:"navbar-filter__check",children:[Object(C.jsx)("input",{type:"checkbox",checked:t,onChange:function(){!function(e){e=e.all?{all:!0,noneTransfer:!1,oneTransfer:!1,twoTransfer:!1,threeTransfer:!1}:Object(g.a)(Object(g.a)({},e),{},{all:!1}),n(e)}(r)}}),Object(C.jsx)("div",{className:"navbar-filter__check-button"}),Object(C.jsx)("div",{className:"navbar-filter__text",children:s})]})})}),z=function(e){var t=e.filter,n=e.changeFilter;return Object(C.jsxs)("div",{className:"navbar",children:[Object(C.jsx)("div",{className:"navbar__header",children:Object(C.jsx)("div",{className:"navbar__title",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"})}),Object(C.jsx)("div",{className:"navbar-filter",children:Object(C.jsxs)("ul",{className:"navbar-filter__list",children:[Object(C.jsx)(E,{filter:t.all,changeFilter:n,text:"\u0412\u0441\u0435",filterData:{all:!0}}),Object(C.jsx)(E,{filter:t.noneTransfer,changeFilter:n,text:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",filterData:{noneTransfer:!t.noneTransfer}}),Object(C.jsx)(E,{filter:t.oneTransfer,changeFilter:n,text:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",filterData:{oneTransfer:!t.oneTransfer}}),Object(C.jsx)(E,{filter:t.twoTransfer,changeFilter:n,text:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",filterData:{twoTransfer:!t.twoTransfer}}),Object(C.jsx)(E,{filter:t.threeTransfer,changeFilter:n,text:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",filterData:{threeTransfer:!t.threeTransfer}})]})})]})},A=n(28),L=(n(65),function(e){var t,n=new Date(e.date),s=new Date(n.getTime()+1e3*e.duration*60),r=function(e){return"".concat(e.getHours(),":").concat(e.getMinutes())};return Object(C.jsxs)("div",{className:"route",children:[Object(C.jsx)(M,{title:e.origin+" \u2013 "+e.destination,text:r(n)+" \u2013 "+r(s)}),Object(C.jsx)(M,{title:"\u0412 \u043f\u0443\u0442\u0438",text:(t=e.duration,"".concat(Math.floor(t/60)," \u0447 ").concat(t%60," \u043c\u0438\u043d"))}),Object(C.jsx)(M,{title:function(e){switch(e.length){case 0:return"\u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";case 1:return"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";case 2:return"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";case 3:return"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}}(e.stops),text:e.stops.join(", ")})]})}),M=function(e){var t=e.title,n=e.text;return Object(C.jsxs)("div",{className:"route__item",children:[Object(C.jsx)("div",{className:"route__title",children:t}),Object(C.jsx)("div",{className:"route__text",children:n})]})},R=function(e){return Object(C.jsxs)("div",{className:"ticket",children:[Object(C.jsxs)("div",{className:"ticket__header",children:[Object(C.jsxs)("div",{className:"ticket__price",children:[e.price," \u0420"]}),Object(C.jsx)("div",{className:"ticket__logo",children:Object(C.jsx)("img",{src:"//pics.avs.io/99/36/".concat(e.carrier,".png"),alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"})})]}),Object(C.jsx)("div",{className:"route-block",children:e.segments.map((function(e,t){return Object(C.jsx)(L,Object(g.a)({},e),t)}))})]})},q=(n(24),function(e){var t=e.tickets,n=e.sorting,s=e.changeSorting,r=e.initialSuccess,c=(e.scrollHeight,e.size),i=Object(A.a)(t).sort((function(e,t){return"cheap"===n?e.price-t.price:"quick"===n?e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration):""})).map((function(e,t){return Object(C.jsx)(R,Object(g.a)({},e),t)}));return Object(C.jsxs)("div",{className:"main-content",children:[Object(C.jsxs)("div",{className:"main-content__header",children:[Object(C.jsx)("div",{className:"main-content__item \n                        ".concat("cheap"===n&&"main-content__item_active"),onClick:function(){s("cheap")},children:Object(C.jsx)("div",{className:"main-content__item__text",children:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"})}),Object(C.jsx)("div",{className:"main-content__item\n                        ".concat("quick"===n&&"main-content__item_active"),onClick:function(){s("quick")},children:Object(C.jsx)("div",{className:"main-content__item__text",children:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"})})]}),r&&i.slice(0,c)]})}),G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).changeSorting=function(t){e.props.changeSorting(t)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.initialSuccess||this.props.getTickets(this.props.searchId)}},{key:"render",value:function(){return Object(C.jsx)(q,{tickets:this.props.tickets,sorting:this.props.sorting,changeSorting:this.changeSorting,initialSuccess:this.props.initialSuccess,scrollHeight:this.props.scrollHeight,size:this.props.size})}}]),n}(r.a.Component),U=G,B=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={scrollHeight:document.documentElement.offsetHeight-window.innerHeight,size:25},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.getSearchId(),window.addEventListener("scroll",(function(){window.pageYOffset>=e.state.scrollHeight&&e.setState({size:e.state.size+25})}))}},{key:"componentDidUpdate",value:function(e,t){e.tickets.length===this.props.tickets.length&&t.size===this.state.size||this.setState({scrollHeight:document.documentElement.offsetHeight-window.innerHeight})}},{key:"render",value:function(){return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(D,{}),Object(C.jsxs)("div",{className:"main",children:[Object(C.jsx)(z,{filter:this.props.filter,changeFilter:this.props.changeFilter}),this.props.searchId&&Object(C.jsx)(U,{tickets:this.props.tickets,searchId:this.props.searchId,getTickets:this.props.getTickets,changeSorting:this.props.changeSorting,sorting:this.props.sorting,initialSuccess:this.props.initialSuccess,scrollHeight:this.state.scrollHeight,size:this.state.size})]})]})}}]),n}(r.a.Component),J=Object(h.b)((function(e){return{tickets:H(e),filter:y(e),searchId:e.searchId,initialSuccess:e.initialSuccess,sorting:e.sorting}}),{getSearchId:function(){return function(){var e=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:n=e.sent,t((s=n.searchId,{type:_,searchId:s}));case 4:case"end":return e.stop()}var s}),e)})));return function(t){return e.apply(this,arguments)}}()},getTickets:function(e){return function(){var t=Object(d.a)(j.a.mark((function t(n){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:200===(s=t.sent).status?(n({type:k}),n((r=s.data.tickets,{type:x,data:r}))):alert("\u041e\u0428\u0418\u0411\u041a\u0410!!! \u041f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443");case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},changeSorting:function(e){return{type:T,sorting:e}},changeFilter:function(e){return{type:N,filter:e}}})(B),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),s(e),r(e),c(e),i(e)}))};i.a.render(Object(C.jsx)(h.a,{store:w,children:Object(C.jsx)(r.a.StrictMode,{children:Object(C.jsx)(J,{})})}),document.getElementById("root")),P()}},[[66,1,2]]]);
//# sourceMappingURL=main.f6d8887f.chunk.js.map